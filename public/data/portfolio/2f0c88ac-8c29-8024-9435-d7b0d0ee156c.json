{
  "title": "ê°€ìŠ¤ ì„¼ì„œ ëª¨ë‹ˆí„°ë§ LED ë””ìŠ¤í”Œë ˆì´ ì‹œìŠ¤í…œ",
  "categories": [
    "íŒì›¨ì–´",
    "C/C++",
    "Android",
    "Git",
    "OTA",
    "Mqtt",
    "RS485"
  ],
  "id": "2f0c88ac-8c29-8024-9435-d7b0d0ee156c",
  "content": "\n## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”\n\n\n**ì œí’ˆëª…:** ê°€ìŠ¤ ì„¼ì„œ ëª¨ë‹ˆí„°ë§ LED ë””ìŠ¤í”Œë ˆì´ ì‹œìŠ¤í…œ\n\n\n**ê°œë°œ ê¸°ê°„:** 2024.XX ~ 2024.XX (Xê°œì›”)\n\n\n**ëª©ì :** ì‚°ì—… í˜„ì¥ ê°€ìŠ¤ ì•ˆì „ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ê°œë°œ\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/26bde0d6-7d92-48b3-8e00-391fd00054f3/7d97668f-335c-4ee2-b9e8-c715e4f5ba0c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466TGAX5S7F%2F20260122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260122T005208Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAkaCXVzLXdlc3QtMiJHMEUCIBsQDEoab6ycZd4i1LkIjoV4DPslzUgSu9ZN5kfbdFDTAiEA6aRkAUZejHPr1jJGIy5gpDbhvv5gW0hWdLRT3RIF8dsqiAQI0v%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgw2Mzc0MjMxODM4MDUiDPFhBhwNTta1pJJppCrcAxiO6pxqZz29kKyNOOX1KlBqrBMbuEvDD%2FdeWyAQN1XIYmxXZdM6dRSD0%2Fa%2FeBJ80J83XDYvkeCmgub%2B8vGmW48Tqh5R4y28%2FxCVOBaF%2F2DAOJEBfVWrXS8No6ryEcrFH%2Fremc0ah%2BM03tKC0ReM0DIABTL1iL%2F2IkHK2A7sKnNP54swimxxk5FL%2BGyFmZHCFKYIRpPd61tUPCCTfFI4n7OWWWO%2B0t6YqfNyaZ7ZR3DRMrcINobCr1CbwdM2SuMVPLuFcVkDWrS9SviHajtlsZamQAaphpJdRYJYOWYAl%2F7Age36oYzZuxl82sjq1laP1HHrND3tQlBQv2dGWJFkjovOx8SK%2B43pEEMDTK%2Bl3iJcBJ8iqSEQc%2FqPxRSgQBLO%2FVU96XcwJd9IS8oXQFiqQs1SF1XH2yJIoEBqszAtmpBVHfPlk9cP3PMF7pHJcK7PAFyvAETOj10uOUG%2FDrQzQHItBRI5IRyDSBmD%2FnyY5PIVVSRMpAPqbtL0fqqSD1byvfqJ0%2B51QA%2FCAaT71NLEIXwuJjLGqjJjeQfga32fjbKrYotcvEIeqENkFP9mY%2FMdSwz6Tugi04EwC43XOla17xJ4liW80Lvf3HUFSpeKJ5uwx20qYpffDSFNmHFFMN%2FmxcsGOqUB3ulizgg6Zg36aEh5J553GYmqO1ZiLuok5%2F79UB2lsOrazE2cdDQbwhyXq6B2nAQw0xa7GVrBA8jVNcoi%2BwOnkQLIJ4EOVZWWc9u%2F3i84z5vdmQHAP1N3tWf5OE2QjiwVEWxWKw%2Beu%2BfR6sZsa%2BIq7JqPPyBRW3Kx04keXiMTBOgc%2F%2BSlA4JUN8d5jQGGwnLNAzFmhLalXWF3pRasiMoohg1Rpwj0&X-Amz-Signature=4fb2183ecd597db5bb4a1cf91106f3794fd0cca23c180faa3eede0c64b945a2d&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/26bde0d6-7d92-48b3-8e00-391fd00054f3/9da23965-eeaf-4f38-81c1-39a589a702bc/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46667CH2JUM%2F20260122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260122T005208Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAkaCXVzLXdlc3QtMiJHMEUCIGkkCW%2BNA1YzzP5VHbddzIz18%2BczhNM0gc7YpgBIQeMXAiEA0dw7QtgTj5uxF8THp0T7NHWlJguRdZRqlO3Uv%2BgA4AcqiAQI0v%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgw2Mzc0MjMxODM4MDUiDCq3bsNfX1UwqWCohSrcA1AEGMsIGvOCxTGIfuAMZP6gSmnOOghyif8QbELDNmf9pPfHKaOwKi%2Fy7sXfQz5OYiEXyx4Zygfu8QiSgfX9%2Bji1FfU%2Fwueu5GygB9wiwOTJnggTQ%2FoXfuh1FhR8dhwxveviJIV2JhwC885VVVTlaL92FzPVS2J%2FlsqwJm8onkShbrDF8LyM5o%2Bx5n4NewFRkvrPURkYiqnqK4hjczXUBpVBGuUTgEDfpqlrgg0A5mN6C11%2F7b1iq0V%2F0kK4x8RVhPP2FSHWQ665xdFG7VJwyiUCm8WsgpzYhBhtiB9scZwWqjL4K94n19KALIz1WoMRTAaJ6QcBsJy2mDtnx5RuW9L4dZYw9BIakYX9MTf8p%2BM08uTLHacBJfLM84A4Kh1KTclkWg%2F1YBcxmVILviF%2BWTp6wHfu%2Bxqu%2BaFhc40CS1FcQDfXIA5ttp9%2BeWjD%2Buy2tYGIzxQS%2Fadg3t59MckCm5VixJL4Ua1BvEAQZ5teID9w424drCyYWV7uiXjFk%2F1QYyKe3m%2F%2BEyvmtM8ey7YhRMEprB10ZJRqoJPhvfpZzmTQ5nPf65AGgBS3rTYIbmYy4w1N2eEjW2uBG%2BtFXxSnHyguUl%2BWyH4FjFzSeH4qPyaOU4P187HrMPEUKaLKMN%2FmxcsGOqUBNDcd6D6usTpUKxmA6xFj1qU6io5otp7ZTcgZNbIF3z4nr505v5xUpSgSsUdwIgC1qhSQtciWq7N2F9XXii68C2%2FOcLsSmEKXawfJODKV4ICDU%2FHm8xoi5rI14vMJF9gqrMIQ1C%2B50kq8%2FjP9VIfq2YXWCDimbOnjWXj21HuCSQ2oJNr2U%2BQcStokwAYe8tgaRQlKye6c6tJ7sf0VfXHmVD27SqGC&X-Amz-Signature=64745f238dd93adc7251d68e9a3c33a19795542aa66f67fcaa7f107bea365975&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)\n\n\n### ê°œë°œ ë™ê¸°\n\n\nì‚°ì—… í˜„ì¥ì—ì„œ ìœ„í—˜ ê°€ìŠ¤(ê°€ì—°ì„±, ì‚°ì†Œ, í™©í™”ìˆ˜ì†Œ, ì¼ì‚°í™”íƒ„ì†Œ)ì˜ ë†ë„ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì‘ì—…ìê°€ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ëŒ€í˜• LED ë””ìŠ¤í”Œë ˆì´ ì‹œìŠ¤í…œì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ì†Œí˜• ì„¼ì„œ ì¥ë¹„ëŠ” ê°€ì‹œì„±ì´ ë–¨ì–´ì§€ê³ , ë°ì´í„° ê¸°ë¡ì´ ì–´ë ¤ìš´ ë¬¸ì œê°€ ìˆì–´ RS485 í†µì‹  ê¸°ë°˜ì˜ ë©€í‹° ì„¼ì„œ í†µí•© ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n\n---\n\n\n## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ\n\n\n### í•˜ë“œì›¨ì–´\n\n- **MCU:** ESP32 ëª¨ë“ˆ\n- **LED ë””ìŠ¤í”Œë ˆì´:** 128Ã—64 RGB LED ë§¤íŠ¸ë¦­ìŠ¤\n- **ì„¼ì„œ:** 4ì¢… ê°€ìŠ¤ ì„¼ì„œ\n\t- COMB (ê°€ì—°ì„± ê°€ìŠ¤)\n\t- O2 (ì‚°ì†Œ)\n\t- H2S (í™©í™”ìˆ˜ì†Œ)\n\t- CO (ì¼ì‚°í™”íƒ„ì†Œ)\n- **í†µì‹ :** RS485 í†µì‹  ëª¨ë“ˆ\n- **ì „ì›:** USB 5V (ESP32), 25V (ê°€ìŠ¤ ì„¼ì„œ)\n\n### ì†Œí”„íŠ¸ì›¨ì–´\n\n- **íŒì›¨ì–´:** C/C++ (Arduino Framework)\n- **ê°œë°œ í™˜ê²½:** Arduino IDE\n- **í”„ë¡œí† ì½œ:** RS485, MQTT\n- **ë¼ì´ë¸ŒëŸ¬ë¦¬:**\n\t- Adafruit GFX Library (LED Matrix ì œì–´)\n\t- ModbusMaster (RS485 í†µì‹ )\n\t- PubSubClient (MQTT)\n\t- WiFi Library (ESP32)\n\n---\n\n\n## ğŸ”§ ì£¼ìš” ê¸°ëŠ¥\n\n\n### 1. 4ë¶„í•  LED ë””ìŠ¤í”Œë ˆì´ ì œì–´\n\n- 128Ã—64 í•´ìƒë„ë¥¼ 4ê°œ êµ¬ì—­ìœ¼ë¡œ ë¶„í•  (ê° 64Ã—32)\n- ê° êµ¬ì—­ì— ê°œë³„ ì„¼ì„œ ë°ì´í„° í‘œì‹œ\n- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (1ì´ˆ ì£¼ê¸°)\n- ê°€ìŠ¤ëª…, ë†ë„ê°’, ë‹¨ìœ„ ë™ì‹œ í‘œì‹œ\n\n### 2. RS485 ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘\n\n- RS485 í†µì‹ ìœ¼ë¡œ 4ì¢… ê°€ìŠ¤ ì„¼ì„œ ì—°ê²°\n- Modbus RTU í”„ë¡œí† ì½œ ì‚¬ìš©\n- ì„¼ì„œ í´ë§ ì£¼ê¸°: 500ms\n- ë°ì´í„° íŒŒì‹± ë° ì—ëŸ¬ ì²´í¬\n\n### 3. 4ì¢… ê°€ìŠ¤ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§\n\n- **COMB (ê°€ì—°ì„± ê°€ìŠ¤):** 0~100% LEL\n- **O2 (ì‚°ì†Œ):** 0~25% Vol\n- **H2S (í™©í™”ìˆ˜ì†Œ):** 0~100 ppm\n- **CO (ì¼ì‚°í™”íƒ„ì†Œ):** 0~500 ppm\n\n### 4. MQTT ë°ì´í„° ì „ì†¡\n\n- WiFië¥¼ í†µí•œ IoT í”Œë«í¼ ì—°ë™\n- ì‹¤ì‹œê°„ ì„¼ì„œ ë°ì´í„° ì—…ë¡œë“œ\n- JSON í˜•ì‹ ë°ì´í„° ì „ì†¡\n- ì—°ê²° ëŠê¹€ ì‹œ ì¬ì—°ê²° ë¡œì§\n\n### 5. ìœ„í—˜ ê²½ë³´ ì‹œìŠ¤í…œ\n\n- ìœ„í—˜ ë†ë„ ì´ˆê³¼ ì‹œ ìƒ‰ìƒ ë³€ê²½ (ë…¹ìƒ‰ â†’ ë¹¨ê°•)\n- ê¹œë¹¡ì„ ì• ë‹ˆë©”ì´ì…˜\n- ì„ê³„ê°’ ì„¤ì • ê°€ëŠ¥\n\n---\n\n\n## ğŸ“¦ ì‹œìŠ¤í…œ êµ¬ì„±\n\n\n### í•˜ë“œì›¨ì–´ êµ¬ì„±í’ˆ\n\n- ESP32 ê°œë°œ ë³´ë“œ\n- 128Ã—64 RGB LED ë§¤íŠ¸ë¦­ìŠ¤ ëª¨ë“ˆ\n- 4ì¢… ê°€ìŠ¤ ì„¼ì„œ (RS485 ì¶œë ¥)\n- RS485 to TTL ì»¨ë²„í„°\n- 25V ì „ì› ì–´ëŒ‘í„° (ì„¼ì„œìš©)\n- 5V USB ì „ì› (ESP32ìš©)\n- ì í¼ ì¼€ì´ë¸” ë° ë¸Œë ˆë“œë³´ë“œ\n\n### ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜\n\n\n```text\n[4ì¢… ê°€ìŠ¤ ì„¼ì„œ]\n     â†“ RS485 í†µì‹ \n[ESP32 ì œì–´ ë³´ë“œ]\n     â”œâ†’ LED ë“œë¼ì´ë²„ â†’ [128Ã—64 LED Matrix]\n     â””â†’ WiFi â†’ MQTT Broker â†’ [IoT í”Œë«í¼]\n\n```\n\n\n### ë°ì´í„° íë¦„\n\n1. ê°€ìŠ¤ ì„¼ì„œì—ì„œ ë†ë„ ì¸¡ì • (25V ì „ì› ê³µê¸‰)\n2. RS485 í†µì‹ ìœ¼ë¡œ ESP32ì— ë°ì´í„° ì „ì†¡\n3. ESP32ì—ì„œ ë°ì´í„° íŒŒì‹± ë° ì²˜ë¦¬\n4. LED ë§¤íŠ¸ë¦­ìŠ¤ 4ë¶„í•  í™”ë©´ ì—…ë°ì´íŠ¸\n5. MQTT í”„ë¡œí† ì½œë¡œ ì„œë²„ ì „ì†¡\n\n---\n\n\n## ğŸ’» í•µì‹¬ ê°œë°œ ë‚´ìš©\n\n\n### 1. LED ë§¤íŠ¸ë¦­ìŠ¤ 4ë¶„í•  ì œì–´ êµ¬í˜„\n\n\n**ë‚´ìš©:**\n\n- 128Ã—64 í•´ìƒë„ë¥¼ 4ê°œ ì˜ì—­ìœ¼ë¡œ ë…¼ë¦¬ ë¶„í• \n- ê° ì˜ì—­ë³„ ë…ë¦½ì ì¸ ë Œë”ë§ ë²„í¼ ê´€ë¦¬\n- ë™ì‹œ ì—…ë°ì´íŠ¸ ìµœì í™”\n\n**ì½”ë“œ ì˜ˆì‹œ:**\n\n\n```c++\n// 4ë¶„í•  í™”ë©´ ë Œë”ë§\nvoid displayQuadSensor(uint8_t quadrant, String gasName, float value, String unit) {\n  uint8_t startX = (quadrant % 2) * 64;\n  uint8_t startY = (quadrant / 2) * 32;\n\n  matrix.setTextColor(LED_GREEN);\n  matrix.setCursor(startX + 5, startY + 5);\n  matrix.print(gasName);\n\n  matrix.setTextSize(2);\n  matrix.setCursor(startX + 5, startY + 15);\n  matrix.print(value, 1);\n  matrix.print(unit);\n}\n\n// ì „ì²´ í™”ë©´ ì—…ë°ì´íŠ¸\nvoid updateDisplay() {\n  matrix.fillScreen(0);\n  displayQuadSensor(0, \"COMB\", combValue, \"%LEL\");\n  displayQuadSensor(1, \"O2\", o2Value, \"%Vol\");\n  displayQuadSensor(2, \"H2S\", h2sValue, \"ppm\");\n  displayQuadSensor(3, \"CO\", coValue, \"ppm\");\n  matrix.show();\n}\n\n```\n\n\n### 2. RS485 í†µì‹  ë° ì„¼ì„œ ë°ì´í„° íŒŒì‹±\n\n\n**ë‚´ìš©:**\n\n- Modbus RTU í”„ë¡œí† ì½œ êµ¬í˜„\n- 4ê°œ ì„¼ì„œ ìˆœì°¨ í´ë§\n- CRC ì²´í¬ ë° ì—ëŸ¬ ì²˜ë¦¬\n- íƒ€ì„ì•„ì›ƒ ê´€ë¦¬\n\n**ì½”ë“œ ì˜ˆì‹œ:**\n\n\n```c++\n// RS485 ì„¼ì„œ ë°ì´í„° ì½ê¸°\nfloat readGasSensor(uint8_t sensorAddr, uint16_t registerAddr) {\n  node.begin(sensorAddr, Serial2);\n  uint8_t result = node.readHoldingRegisters(registerAddr, 1);\n\n  if (result == node.ku8MBSuccess) {\n    uint16_t rawValue = node.getResponseBuffer(0);\n    return rawValue / 10.0; // ë°ì´í„° ìŠ¤ì¼€ì¼ë§\n  }\n  return -1.0; // ì—ëŸ¬\n}\n\n// 4ì¢… ì„¼ì„œ ìˆœì°¨ ì½ê¸°\nvoid pollAllSensors() {\n  combValue = readGasSensor(0x01, 0x0000); // COMB ì„¼ì„œ\n  o2Value = readGasSensor(0x02, 0x0000);   // O2 ì„¼ì„œ\n  h2sValue = readGasSensor(0x03, 0x0000);  // H2S ì„¼ì„œ\n  coValue = readGasSensor(0x04, 0x0000);   // CO ì„¼ì„œ\n}\n\n```\n\n\n### 3. MQTT ë°ì´í„° ì „ì†¡\n\n\n**ë‚´ìš©:**\n\n- WiFi ì—°ê²° ê´€ë¦¬\n- MQTT Broker ì—°ê²°\n- JSON í˜•ì‹ ë°ì´í„° íŒ¨í‚¹\n- QoS ë ˆë²¨ 1 (ìµœì†Œ 1íšŒ ì „ì†¡ ë³´ì¥)\n\n**í†µì‹  í”„ë¡œí† ì½œ:**\n\n\n```json\n{\n  \"timestamp\": 1705123456,\n  \"device_id\": \"GAS_MONITOR_01\",\n  \"sensors\": {\n    \"COMB\": {\"value\": 15.5, \"unit\": \"%LEL\", \"status\": \"normal\"},\n    \"O2\": {\"value\": 20.9, \"unit\": \"%Vol\", \"status\": \"normal\"},\n    \"H2S\": {\"value\": 2.3, \"unit\": \"ppm\", \"status\": \"normal\"},\n    \"CO\": {\"value\": 5.1, \"unit\": \"ppm\", \"status\": \"normal\"}\n  }\n}\n\n```\n\n\n**ì½”ë“œ ì˜ˆì‹œ:**\n\n\n```c++\n// MQTT ë°ì´í„° ë°œí–‰\nvoid publishSensorData() {\n  StaticJsonDocument<512> doc;\n  doc[\"timestamp\"] = millis();\n  doc[\"device_id\"] = \"GAS_MONITOR_01\";\n\n  JsonObject sensors = doc.createNestedObject(\"sensors\");\n  sensors[\"COMB\"][\"value\"] = combValue;\n  sensors[\"O2\"][\"value\"] = o2Value;\n  sensors[\"H2S\"][\"value\"] = h2sValue;\n  sensors[\"CO\"][\"value\"] = coValue;\n\n  char buffer[512];\n  serializeJson(doc, buffer);\n  mqttClient.publish(\"gas/sensor/data\", buffer);\n}\n\n```\n\n\n### 4. ìœ„í—˜ ê²½ë³´ ë¡œì§\n\n\n**ë‚´ìš©:**\n\n- ê° ê°€ìŠ¤ë³„ ì„ê³„ê°’ ì„¤ì •\n",
  "lastUpdateDate": "2026-01-22T00:50:00.000Z",
  "imgUrl": ""
}